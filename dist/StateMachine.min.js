!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.StateMachine=n():t.StateMachine=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){t.exports=e(6)},,,function(t,n){"use strict";function e(t){return"[object Object]"===Object.prototype.toString.call(t)}function r(t){return t instanceof Array}function i(t){return"string"==typeof t}function s(t){return t instanceof Function}function o(t){return"undefined"!=typeof t}function a(t){return"undefined"==typeof t}function u(t){return String(t||"").replace(/^\s+|\s+$/g,"")}function c(t,n){var e=n.filter(function(n){return t.indexOf(n)<0}),r=t.filter(function(t){return n.indexOf(t)<0});return r.concat(e)}function f(t){return t.reduce(function(t,n){return t[n]=!0,t},{})}Object.defineProperty(n,"__esModule",{value:!0}),n.isObject=e,n.isArray=r,n.isString=i,n.isFunction=s,n.isDefined=o,n.isUndefined=a,n.trim=u,n.diff=c,n.toHash=f},,,function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){this.transitions=new l["default"],this.handlers=new f["default"](this),this.initialize(t)}function s(t,n,e){var r=t.transitions.getStates(),i=t.transitions.getActions();e();var s=t.transitions.getStates(),o=t.transitions.getActions(),a=(0,v.diff)(r,s),u=(0,v.diff)(i,o);a.forEach(function(e){return t.handlers.trigger("system.state."+n,e)}),u.forEach(function(e){return t.handlers.trigger("system.action."+n,e)})}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){var e=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(u){i=!0,s=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw s}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=e(7),u=r(a),c=e(8),f=r(c),h=e(17),l=r(h),d=e(20),p=r(d),v=e(3);i.prototype={config:null,transitions:null,handlers:null,transition:null,state:"",initialize:function(t){var n=this;this.state="";var e=new u["default"](t);this.config=e;var r=[];if(Array.isArray(t.transitions)&&t.transitions.forEach(function(t){r=r.concat(n.transitions.parse(t))}),r.forEach(function(t){n.transitions.add(t.action,t.from,t.to)}),e.initial||(e.initial=this.transitions.getStates()[0]),t.handlers)for(var i in t.handlers)t.handlers.hasOwnProperty(i)&&this.on(i,t.handlers[i]);if(t.methods){this.config.scope||(this.config.scope=this);for(var s in t.methods)t.methods.hasOwnProperty(s)&&!this.hasOwnProperty(s)&&(this[s]=t.methods[s])}return this.config.start&&this.start(),this},start:function(){return this.state=this.config.initial,this.handlers.trigger("system.start"),this.state&&this.handlers.trigger("system.change",this.state),this},reset:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t||this.config.initial;return this.handlers.trigger("system.reset"),this.transition&&(this.transition.cancel(),delete this.transition),this.state!==n&&(this.state=n,this.handlers.trigger("system.change",this.state)),this},"do":function(t){if(this.canDo(t)&&!this.isPaused()){for(var n=arguments.length,e=Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];return this.transition=p["default"].create(this,t,e),this.transition.exec(),!0}return!1},go:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.has(t)){if(n)return this.transition&&this.transition.clear(),this.transition=p["default"].force(this,t),this.end();var e=this.transitions.getActionFor(this.state,t);return e?this["do"](e):(this.config.errors>0&&console.warn('No transition exists from "%s" to "%s"',this.state,t),!1)}return this.config.errors>0&&console.warn('No such state "%s"',t),!1},canDo:function(t){return this.transitions.getActionsFrom(this.state).indexOf(t)!==-1},canGo:function(t){return null!==this.transitions.getActionFor(this.state,t)},has:function(t){return this.transitions.hasState(t)},is:function(t){return t===this.state},isStarted:function(){return""!==this.state},isTransitioning:function(){return!!this.transition},isPaused:function(){return!!this.transition&&this.transition.paused},isComplete:function(){return this.state===this.config["final"]},pause:function(){return this.transition&&!this.isPaused()&&this.transition.pause(),this},resume:function(){return this.transition&&this.isPaused()&&this.transition.resume(),this},cancel:function(){return this.transition&&(this.state=this.transition.from,this.transition.cancel(),delete this.transition),this},end:function(){return this.transition&&(this.state=this.transition.to,this.transition.clear(),delete this.transition,this.handlers.trigger("system.change",this.state),this.isComplete()&&this.handlers.trigger("system.complete")),this},add:function(t,n,e){var r=this;if(1===arguments.length){var i=this.transitions.parse(t);return i.forEach(function(t){return r.add(t.action,t.from,t.to)}),this}return s(this,"add",function(){return r.transitions.add(t,n,e)}),this},remove:function(t){var n=this;return this.handlers.remove("state."+t),s(this,"remove",function(){return n.transitions.remove(t)}),this},on:function(t,n){var e=this;return this.parse(t,this.config.invalid,this.config.errors).forEach(function(t){return e.handlers.add(t.path,n)}),this},off:function(t,n){var e=this;return this.parse(t,this.config.invalid,this.config.errors).forEach(function(t){return e.handlers.remove(t.path,n)}),this},parse:function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.handlers.parse(t).filter(function(t){if(t instanceof Error){if(2==r)throw t;return 1==r&&console.warn(t.message),!1}if("*"!==t.target){var i="";if("state"===t.namespace)n.transitions.hasState(t.target)||(i='Unrecognised state "'+t.target+'" in handler "'+t.id+'"');else if("action"===t.namespace)n.transitions.hasAction(t.target)||(i='Unrecognised action "'+t.target+'" in handler "'+t.id+'"');else if("state/action"===t.namespace){var s=t.target.split("@"),a=o(s,2),u=a[0],c=a[1];n.transitions.hasState(u)||(i='Unrecognised state "'+u+'" in handler "'+t.id+'"'),n.transitions.hasAction(c)||(i='Unrecognised action "'+c+'" in handler "'+t.id+'"')}if(i){if(2==r)throw new Error(i);return 1==r&&console.warn(i),!!e}}return!0})},trigger:function(t){for(var n=this,e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return this.handlers.parse(t).forEach(function(t){return n.handlers.trigger.apply(n.handlers,[t.path].concat(r))}),this}},i.prototype.constructor=i,n["default"]=i,i.create=function(t){return new i(t)},i.getDefaultOrder=function(){return["action.*.start","action.{action}.start","state.*.{action}","state.{from}.{action}","state.{from}.leave","state.*.leave","state.*.enter","state.{to}.enter","action.{action}.end","action.*.end"]}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){var n=this;"scope start initial final invalid errors".match(/\w+/g).forEach(function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),this.order=t.order||o["default"].getDefaultOrder(),this.defaults=Object.assign({action:"start",state:"enter"},t.defaults)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var s=e(6),o=r(s);i.prototype={scope:null,start:!0,initial:"","final":"",invalid:!1,errors:1,order:null,defaults:null}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){this.fsm=t,this.map=new a["default"]}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,n){var e=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(u){i=!0,s=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw s}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=e(9),a=r(o),u=e(10),c=e(3),f=e(11),h=r(f);i.prototype={fsm:null,map:null,parse:function(t){return(0,h["default"])(t,this.fsm.config.defaults)},add:function(t,n){if(!(0,c.isFunction)(n))throw new Error('Error assigning "'+t+'" handler; callback is not a function',n);return this.map.insert(t,n),this},remove:function(t,n){return this.map.remove(t,n),this},get:function(t){return this.map.get(t)},trigger:function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t.match(/\w+/g),i=s(r,3),o=i[0],a=i[1],c=i[2],f=void 0;f=/^system\.(state|action)\./.test(t)?"state"===a?new u.StateEvent(c,e):new u.ActionEvent(c,e):"system"===o?new u.SystemEvent(a,e):new u.TransitionEvent(a);var h=this.map.get(t);h&&h.forEach(function(t){return t(f,n.fsm)})}},n["default"]=i},function(t,n,e){"use strict";function r(t){this.data=t||{}}function i(t,n){for(var e=void 0;n.length;)e=n.shift(),(0,d.isObject)(t[e])||(t[e]={}),t=t[e];return t}function s(t,n,e){var r=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,String(n).split(".")),s=r.pop();t=i(t,r),t[s]=e}function o(t,n,e){var r=String(n).split("."),s=r.pop();t=i(t,r),(0,d.isArray)(t[s])||(t[s]=[]),t[s].push(e)}function a(t,n,e){var r=String(n).split("."),s=r.pop();t=i(t,r),(0,d.isArray)(t[s])||(t[s]=[]);var o=t[s],a=o.indexOf(e);a===-1?o.push(e):o[a]=e}function u(t,n){if((0,d.isUndefined)(n)||""==n)return t;for(var e=void 0,r=String(n).split(".");r.length>1;){if(e=r.shift(),!t.hasOwnProperty(e))return;t=t[e]}return e=r.shift(),t[e]}function c(t,n,e){var r=u(t,n);return!!((0,d.isArray)(r)&&(0,d.isDefined)(e)?r.indexOf(e)!==-1:(0,d.isUndefined)(e)?(0,d.isDefined)(r):r===e)}function f(t,n,e){var r=u(t,n);return(0,d.isArray)(r)?r.indexOf(e):-1}function h(t,n,e){var r=t,i=String(n||"").split("."),s=i.pop();if(i.length&&(r=u(t,i.join("."))),(0,d.isDefined)(e)&&(0,d.isArray)(r[s])){var o=r[s],a=o.indexOf(e);return a>-1&&(o.splice(a,1),0===o.length&&delete r[s],!0)}return!(!(0,d.isObject)(r)||!t.hasOwnProperty(s))&&(delete r[s],!0)}function l(t,n){var e=[],r=u(t,n);if((0,d.isObject)(r))for(var i in r)r.hasOwnProperty(i)&&e.push(r[i]);return e}Object.defineProperty(n,"__esModule",{value:!0}),n.values=n.remove=n.indexOf=n.has=n.get=n.set=void 0,n["default"]=r;var d=e(3);r.prototype={data:null,set:function(t,n){return s(this.data,t,n),this},add:function(t,n){return o(this.data,t,n),this},insert:function(t,n){return a(this.data,t,n),this},get:function(t){return u(this.data,t)},has:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return c(this.data,t,n)},indexOf:function(t,n){return f(this.data,t,n)},remove:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return h(this.data,t,n),this},keys:function(t){return Object.keys(u(this.data,t))},values:function(t){return l(this.data,t)}},n.set=s,n.get=u,n.has=c,n.indexOf=f,n.remove=h,n.values=l},function(t,n){"use strict";function e(t,n,e,r,i){t.namespace=n,t.type=e,t.target=r,t.transition=i}function r(t,n,r){e(this,"action",t,n,r)}function i(t,n,r){e(this,"state",t,n,r)}function s(t,n){this.type=t,this.value=n}function o(t){this.type=t}Object.defineProperty(n,"__esModule",{value:!0}),n.ActionEvent=r,n.StateEvent=i,n.SystemEvent=s,n.TransitionEvent=o;var a={namespace:null,type:null,target:null,transition:null};r.prototype=a,i.prototype=a,s.prototype={namespace:"system",type:"",value:null},o.prototype={namespace:"transition",type:""}},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){return/^(start|change|complete|reset)$/.test(t)}function s(t){return/^(pause|resume|cancel)$/.test(t)}function o(t){var n=/\((.+?)\)/,e=t.match(n);if(e){var r=e[0],i=e[1].match(/\S+/g);if(i)return i=i.map(function(n){return t.replace(r,n)}),n.test(i[0])?i.reduce(function(t,n){return t.concat(o(n))},[]):i}return[t]}function a(t,n,e){return y.push(new h["default"](m,t,n,e)),!0}function u(t,n){var e=new v.ParseError(t,n,m);return y.push(e),!1}function c(t,n){return t=(0,p.trim)(t),m=t,g=n,y=[],S.parse(t,n),y}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=c;var f=e(12),h=r(f),l=e(13),d=r(l),p=e(3),v=e(16),y=void 0,g=void 0,m=void 0,w={alias:/^(\w+)$/,namespaced:/^(system|transition|state|action)\.(\w+)$/,oneAction:/^@(\w+)$/,oneActionEvent:/^@(\w+):(start|end)$/,anyActionEvent:/^:(start|end)$/,oneState:/^#(\w+)$/,oneStateEvent:/^#?(\w+):(leave|enter)$/,anyStateEvent:/^:(enter|leave)$/,oneStateAction:/^#?(\w+)@(\w+)$/},b=new d["default"](w),S={parse:function(t,n){var e=this,r=o(t);r.forEach(function(t){return e.parsePath(t)})},parsePath:function(t){var n=void 0;try{n=b.process(t)}catch(e){return u('Unrecognised pattern "'+t+'"',t)}if(n&&n.length){var r=n.shift(),i=this[r.type];return i?i.apply(this,r.values):u('Unknown token type "'+r.type+'"',t)}},alias:function(t){return i(t)?a("system."+t,"system"):s(t)?a("transition."+t,"transition"):this.oneState(t)},namespaced:function(t,n){var e=t+"."+n;return"system"===t&&i(n)||"transition"===t&&s(n)?a(e,t):/^(state|action)$/.test(t)&&/^(add|remove)$/.test(n)?a("system."+e,"system"):void u('Unrecognised type "'+n+'" for namespace "'+t+'"',m)},oneState:function(t){return a("state."+t+"."+g.state,"state",t)},oneAction:function(t){return a("action."+t+"."+g.action,"action",t)},anyActionEvent:function(t){return a("action.*."+t,"action","*")},oneActionEvent:function(t,n){return a("action."+t+"."+n,"action",t)},anyStateEvent:function(t){return a("state.*."+t,"state","*")},oneStateEvent:function(t,n){return a("state."+t+"."+n,"state",t)},oneStateAction:function(t,n){return a("state."+t+"."+n,"state/action",t+"@"+n)}}},function(t,n){"use strict";function e(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.id=t,this.path=n,e&&(this.namespace=e),r&&(this.target=r)}Object.defineProperty(n,"__esModule",{value:!0}),e.prototype={id:"",path:"",namespace:"",target:""},n["default"]=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){var n=this;this.rules=[],t&&Object.keys(t).forEach(function(e){return n.addRule(e,t[e])})}function s(t,n,e){this.message=t,this.source=n,this.index=e}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var o=e(14),a=r(o),u=e(15),c=r(u);i.prototype={source:null,rules:null,tokens:null,index:0,process:function(t){return this.source=t,this.tokens=[],this.index=0,this.next(),this.tokens},addRule:function(t,n){this.rules.push(new a["default"](t,n))},next:function(){var t=this;this.index<this.source.length&&!function(){var n=t.source.substr(t.index),e=t.rules.some(function(e){var r=n.match(e.rx);return!!r&&(t.tokens.push(new c["default"](e.name,r)),t.index+=r[0].length,!0)});if(!e)throw new s("Unable to match source at position "+t.index+': "'+n+'"',t.source,t.index);t.next()}()}},s.prototype=new Error,s.prototype.constructor=s},function(t,n){"use strict";function e(t,n){this.name=t,this.rx=n}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=e},function(t,n){"use strict";function e(t,n){this.type=t,this.match=n[0],this.values=n.slice(1)}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=e},function(t,n){"use strict";function e(t,n,e){this.message=t,this.path=n,this.id=e}Object.defineProperty(n,"__esModule",{value:!0}),n.ParseError=e,e.prototype=Error.prototype,e.prototype.name="ParseError",e.prototype.constructor=e},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function s(){this.map=new c["default"],this.states=[],this.actions=[]}function o(t){var n,e={},r={},i=t.map.data;for(var s in i){r[s]=!0;for(var o in i[s])e[o]=!0,n=i[s][o],"function"!=typeof n&&(r[n]=!0)}return t.states=Object.keys(r).filter(function(t){return"*"!==t}),t.actions=Object.keys(e),t}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=e(9),c=r(u),f=e(18),h=r(f),l=e(3);s.prototype={map:null,states:null,actions:null,parse:function(t){return(0,h["default"])(t)},add:function(t,n,e){if(t=(0,l.trim)(t),n=(0,l.trim)(n),e="string"==typeof e?(0,l.trim)(e):e,"*"===e)throw new Error("Transitioning to a wildcard doesn't make sense");return this.map.set(n+"."+t,e),o(this)},remove:function(t){this.map.remove(t);var n=this.map.data;for(var e in n){var r=n[e];for(var i in r)r[i]===t&&delete r[i]}return o(this)},getActionsFrom:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.has(t)||this.has("*")){var e=this.map.get(t)||{},r=this.map.get("*"),i=Object.assign({},e);if(r)for(var s in r){var o=r[s];o===t||e[s]||(i[s]=o)}return i?n?i:Object.keys(i):[]}return[]},getActionFor:function(t,n){var e=this.map.get(t);for(var r in e)if(e[r]===n)return r;return null},getStatesFrom:function(t){var n=this;if(this.hasState(t)){var e=function(){var e=n.getActionsFrom(t,!0);return{v:Object.keys(e).map(function(t){return e[t]})}}();if("object"===("undefined"==typeof e?"undefined":a(e)))return e.v}return null},getStateFor:function(t,n){var e=this.getActionsFrom(t,!0)||{};return e[n]},getStates:function(){return[].concat(this.states)},getActions:function(){return[].concat(this.actions)},get:function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return n=[].concat(i(n)).join("."),this.map.get(n)},hasState:function(t){return this.states.indexOf(t)!==-1},hasAction:function(t){return this.actions.indexOf(t)!==-1},hasTransition:function(t,n,e){return this.map.get(n+"."+t)===e},has:function(){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];return n=[].concat(i(n)).join("."),!!n&&this.map.has(n)}},s.prototype.constructor=s,n["default"]=s},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,n){return'Invalid transition shorthand pattern "'+t+'" - '+n}function s(t,n,e,r){t.push(new l["default"](n,e,r))}function o(t){if((0,c.isString)(t)){var n=function(){if(t=t.replace(/([|=:<>])/g," $1 ").replace(/\s+/g," ").replace(/^\s+|\s+$/g,""),!/^\w+ [:=] [*\w][\w ]*[|<>] [*\w][\w ]*/.test(t))throw new f.ParseError(i(t,"cannot determine action and states"));for(var n=[],e=t.match(/([*\w ]+|[|<>])/g),r=e.shift().replace(/\s+/g,""),o=[],a="",c="",h="",l="";e.length;)if(a=e.shift(),"|"===a&&(o=[],a=e.shift()),/[<>]/.test(a)?c=a:(a=a.match(/[*\w]+/g),a=1===a.length?a[0]:a,o.push(a)),2===o.length){var d="<"===c?[o[1],o[0]]:o,p=u(d,2);if(h=p[0],l=p[1],Array.isArray(h)&&Array.isArray(l))throw new f.ParseError(i(t,"transitioning between 2 arrays doesn't make sense"));if("*"===l)throw new f.ParseError(i(t,"transitioning to a wildcard doesn't make sense"));Array.isArray(h)?h.forEach(function(t){return s(n,r,t,l)}):Array.isArray(l)?l.forEach(function(t){return s(n,r,h,t)}):s(n,r,h,l),o.shift()}return{v:n}}();if("object"===("undefined"==typeof n?"undefined":a(n)))return n.v}return[t]}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,n){var e=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(u){i=!0,s=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw s}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n["default"]=o;var c=e(3),f=e(16),h=e(19),l=r(h)},function(t,n){"use strict";function e(t,n,e){this.action=t,this.from=n,this.to=e}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=e},function(t,n,e){"use strict";function r(t,n,e,r){this.fsm=t,this.action=n,this.from=e,this.to=r,this.clear()}function i(t){t.paused||(t.paused=!0,t.fsm.handlers.trigger("transition.pause",!0))}function s(t){t.paused&&(t.paused=!1,t.fsm.handlers.trigger("transition.resume",!1))}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,n){var e=[],r=!0,i=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done)&&(e.push(o.value),!n||e.length!==n);r=!0);}catch(u){i=!0,s=u}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw s}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=e(10),u=e(3);r.prototype={fsm:null,action:"",from:"",to:"",paused:!1,handlers:null,clear:function(){s(this),this.handlers=[]},exec:function(){if(!this.paused)if(this.handlers.length){var t=this.handlers.shift(),n=t();if(n===!1)return this.fsm.cancel();if(n===!0)return this.fsm.pause();this.exec()}else this.fsm.end();return this},pause:function(){return i(this),this},resume:function(){return s(this),this.exec()},cancel:function(){this.paused=!1,this.fsm.handlers.trigger("transition.cancel",!1)}},n["default"]={create:function(t,n,e){var i=t.config.scope,s=t.state,c=t.transitions.getStateFor(s,n),f={action:n,to:c,from:s};if((0,u.isFunction)(c)&&(c=c.apply(i,[t].concat(e)),!t.transitions.hasState(c)))throw new Error('Invalid "to" state "'+c+'"');var h=[],l=new r(t,n,s,c);return t.config.order.forEach(function(n){n=n.replace(/{(\w+)}/g,function(t,n){return f[n]});var r=t.handlers.get(n);r&&!function(){var s=n.split("."),u=o(s,3),c=u[0],f=u[1],d=u[2];r=r.map(function(n){var r="state"===c?a.StateEvent:a.ActionEvent,s=new r(d,f,l);return function(){return n.apply(i,[s,t].concat(e))}}),h=h.concat(r)}()}),l.handlers=h,l},force:function(t,n){var e=new r(t,"",t.state,n);return e.paused=!!t.transition&&t.transition.paused,e}}}])});
//# sourceMappingURL=StateMachine.min.js.map